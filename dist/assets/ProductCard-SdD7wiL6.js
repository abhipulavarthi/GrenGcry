import{r as i,d as j,j as t}from"./index-BLFxWsoH.js";function w({product:e,onAdd:n,onDec:o}){const[g,N]=i.useState(1),[p,h]=i.useState(null),d=j(s=>s.cart.items||[]),m=e.unitType||(/fruit|veg|vegetable|onion|potato|tomato/i.test(e.category||"")?"kg":"pcs"),a=i.useMemo(()=>Array.isArray(e.unitOptions)&&e.unitOptions.length?e.unitOptions:m==="kg"?[{label:"250 g",multiplier:.25},{label:"500 g",multiplier:.5},{label:"1 kg",multiplier:1},{label:"2 kg",multiplier:2}]:[{label:"1 pc",multiplier:1},{label:"2 pcs",multiplier:2},{label:"4 pcs",multiplier:4}],[e.unitOptions,m]),l=p||a[0],c=i.useMemo(()=>{const s=`${e.id}:${l.label}`;return(d||[]).filter(r=>r.id===s).reduce((r,y)=>r+(y.qty||0),0)},[d,e.id,l.label]),b=(e.price||0)*l.multiplier,x=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),u=(s=1)=>{if(!n)return;const r={id:`${e.id}:${l.label}`,productId:e.id,name:e.name,price:b,qty:s,unitLabel:l.label,unitMultiplier:l.multiplier,image:e.image};n(r)},f=(s=1)=>{if(!o)return;const r=`${e.id}:${l.label}`;o({id:r,qty:s})};return t.jsxs("div",{className:"rounded-lg p-4 flex flex-col border border-brand-steel/50 hover:border-brand-steel transition shadow-sm hover:shadow-md bg-white/60",children:[t.jsx("img",{src:e.image||"https://via.placeholder.com/300x200",alt:e.name,className:"rounded mb-3 aspect-video object-cover border border-brand-steel/30"}),t.jsx("h3",{className:"font-semibold text-lg mb-0.5 text-gray-900",children:e.name}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300 mb-3",children:e.category}),t.jsxs("div",{className:"mt-auto space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-xl text-[#6F4E37]",children:x(b)}),e.originalPrice!=null&&t.jsx("span",{className:"text-xs line-through text-gray-500",children:x((e.originalPrice||0)*l.multiplier)})]}),t.jsx("select",{className:"border border-brand-steel/50 rounded px-2 py-1 text-sm bg-transparent focus:outline-none focus:ring-2 focus:ring-[#6F4E37]/40",value:l.label,onChange:s=>h(a.find(r=>r.label===s.target.value)||a[0]),children:a.map(s=>t.jsx("option",{value:s.label,children:s.label},s.label))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{className:"px-3 py-1 border border-brand-steel/60 rounded-l bg-white hover:bg-brand-sand/40",onClick:()=>f(1),children:"-"}),t.jsx("span",{className:"px-4 py-1 border-t border-b border-brand-steel/60 bg-white",title:"In cart",children:c}),t.jsx("button",{className:"px-3 py-1 border border-brand-steel/60 rounded-r bg-white hover:bg-brand-sand/40",onClick:()=>u(1),children:"+"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[c>0&&t.jsxs("span",{className:"text-xs text-gray-700",children:["In cart: ",c]}),n&&t.jsx("button",{className:"px-4 py-1.5 bg-[#6F4E37] text-white rounded hover:bg-[#6F4E37]/90",onClick:()=>u(g),children:"Add"})]})]})]})]})}export{w as P};
