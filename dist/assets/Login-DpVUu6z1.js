import{u as w,a as f,b as y,j as s,L as r,c as L,l as v,B as p}from"./index-BLFxWsoH.js";import{u as S,o as E,c as F,a as u}from"./index.esm-7R15jc3W.js";const k=F({email:u().email().required(),password:u().min(6).required()});function B(){var c,d;const x=w(),b=f(),n=y(),h=((d=(c=n.state)==null?void 0:c.from)==null?void 0:d.pathname)||"/",{register:o,handleSubmit:g,formState:{errors:e,isSubmitting:i}}=S({resolver:E(k)}),a=(n.pathname||"/login").endsWith("/admin")?"admin":"customer",j=async N=>{var l,m;try{const t=await L.post("/auth/login",{...N,role:a});x(v(t.data)),p.success("Logged in"),b(h,{replace:!0})}catch(t){p.error(((m=(l=t.response)==null?void 0:l.data)==null?void 0:m.message)||"Login failed")}};return s.jsxs("div",{className:"max-w-md mx-auto mt-16 border dark:border-gray-800 rounded p-6",children:[s.jsxs("h1",{className:"text-2xl font-semibold mb-4",children:["Login (",a,")"]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx(r,{to:"/login/admin",className:`px-3 py-1 rounded border ${a==="admin"?"bg-[#6F4E37] text-white":"bg-transparent"}`,children:"Admin"}),s.jsx(r,{to:"/login/user",className:`px-3 py-1 rounded border ${a==="customer"?"bg-[#6F4E37] text-white":"bg-transparent"}`,children:"User"})]}),s.jsxs("form",{onSubmit:g(j),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1",children:"Email"}),s.jsx("input",{className:"w-full border rounded px-3 py-2 bg-transparent",...o("email")}),e.email&&s.jsx("p",{className:"text-sm text-brand-brown",children:e.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-1",children:"Password"}),s.jsx("input",{type:"password",className:"w-full border rounded px-3 py-2 bg-transparent",...o("password")}),e.password&&s.jsx("p",{className:"text-sm text-brand-brown",children:e.password.message})]}),s.jsx("button",{disabled:i,className:"w-full py-2 bg-[#6F4E37] text-white rounded",children:i?"...":"Login"})]}),s.jsxs("p",{className:"text-sm mt-3",children:["No account? ",s.jsx(r,{to:"/signup",className:"text-[#6F4E37]",children:"Sign up"})]})]})}export{B as default};
