import{u as o,a as x,d as m,j as e,L as b,f as h,g as p,i as u,k as d,c as j,B as N}from"./index-BLFxWsoH.js";function v(){const t=o(),n=x(),r=m(s=>s.cart.items),l=r.reduce((s,a)=>s+a.price*a.qty,0),c=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),i=async()=>{var s;try{if(r.length===0)return;const a=await j.post("/orders",{items:r});t(d()),n(`/billing/${((s=a.data)==null?void 0:s.id)||""}`)}catch{N.error("Checkout failed")}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Cart"}),r.length===0?e.jsxs("div",{children:[e.jsx("p",{children:"Your cart is empty."}),e.jsx(b,{to:"/products",className:"text-brand-steel",children:"Browse products"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"space-y-3",children:r.map(s=>e.jsxs("div",{className:"flex gap-4 items-center border-b dark:border-gray-800 py-3",children:[e.jsx("img",{src:s.image||"https://via.placeholder.com/80x80",alt:s.name,className:"w-20 h-20 object-cover rounded border border-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-lg",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.unitLabel||""}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Unit Price: ",c(s.price)]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>t(h({id:s.id,qty:1})),className:"px-3 py-1.5 border border-brand-steel/60 rounded-l bg-white hover:bg-brand-sand/40",children:"-"}),e.jsx("span",{className:"px-4 py-1.5 border-t border-b border-brand-steel/60 bg-white min-w-[50px] text-center",children:s.qty}),e.jsx("button",{onClick:()=>t(p({...s,qty:1})),className:"px-3 py-1.5 border border-brand-steel/60 rounded-r bg-white hover:bg-brand-sand/40",children:"+"})]}),e.jsx("span",{className:"font-semibold text-lg min-w-[80px] text-right",children:c(s.price*s.qty)}),e.jsx("button",{onClick:()=>t(u(s.id)),className:"px-3 py-1.5 text-sm bg-brand-brown text-white rounded hover:bg-brand-brown/90",children:"Remove"})]})]},s.id))}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"font-bold text-xl",children:["Total: ",c(l)]}),e.jsx("div",{className:"mt-3 flex items-center justify-between",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>t(d()),className:"px-3 py-2 border rounded",children:"Clear"}),e.jsx("button",{onClick:i,className:"px-3 py-2 bg-brand-steel text-white rounded",children:"Checkout"})]})})]})]})]})}export{v as default};
